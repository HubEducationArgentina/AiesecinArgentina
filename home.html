<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Bienvenido - Plataforma Educativa</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background-color: #0f0f0f;
            color: #ffffff;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #1f1f1f;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
        }

        nav a {
            color: #ddd;
            margin-left: 20px;
            text-decoration: none;
        }

        nav a:hover {
            color: #1e90ff;
        }

        .welcome-container {
            padding: 60px 40px;
            max-width: 900px;
            margin: auto;
        }

        .welcome-container h1 {
            font-size: 2em;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .welcome-container p {
            font-size: 1.1em;
            line-height: 1.6;
            color: #ccc;
        }

        .buttons {
            margin-top: 30px;
        }

        .buttons button {
            margin-right: 15px;
            padding: 12px 20px;
            font-size: 1em;
            background-color: #0078d4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .buttons button:hover {
            background-color: #005fa3;
        }

        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
            background-color: #1f1f1f;
            color: #888;
        }
    </style>
</head>
<body>


<!-- HEADER: logo - progress module - nav -->
<header>
  <div class="logo">VALKIRIANS | HUB EDUCACIONAL</div>

  <!-- Módulo de progreso -->
  <div class="progress-module" id="progressModule" aria-label="Progreso del usuario">
    <div class="level" id="levelLabel">NIVEL 3</div>

    <div class="progress-wrapper" title="Progreso">
      <div class="progress-track" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="progressTrack">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-info">
        <span id="xpLabel">Experiencia Obtenida</span>
      </div>
    </div>
  </div>

  <nav>
    <a href="home.html">Inicio</a>
    <a href="quiz.html">Certificados</a>
    <a href="#">Mis cursos</a>
    <a href="index.html" id="logout">Cerrar sesión</a>
  </nav>
</header>

<style>
/* --- Header layout (ajusta si ya tienes estilos) --- */
header {
  background-color: #1f1f1f;
  padding: 12px 24px;
  display: flex;
  align-items: center;
  gap: 20px;
}

/* Logo y nav ocupan sus espacios; progress se centra */
.logo { font-size: 1.2rem; font-weight: 700; color:#fff; }
nav { margin-left: auto; display:flex; gap: 18px; }
nav a { color:#ddd; text-decoration:none; }
nav a:hover { color:#1e90ff; }

/* --- Progress module --- */
.progress-module {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 0 0 auto;            /* no crecer demasiado */
  margin: 0 auto;            /* centrar en el header */
  color: #fff;
  min-width: 320px;
}

/* Nivel a la izquierda */
.level {
  font-size: 0.8rem;
  font-weight: 700;
  color: #dbeafe;
  letter-spacing: .6px;
  white-space: nowrap;
}

/* Wrapper que contiene la barra y el texto pequeño */
.progress-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* La "pista" gris */
.progress-track {
  width: 220px;
  height: 14px;
  background: linear-gradient(180deg, #2b2b2b, #232323); /* pista gris oscuro */
  border-radius: 12px;
  overflow: hidden;
  box-shadow: inset 0 -1px 0 rgba(0,0,0,0.6);
  position: relative;
}

/* El relleno que se anima */
.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #9be78b 0%, #44c767 60%); /* verde degradado */
  border-radius: 12px 0 0 12px;
  transition: width 700ms cubic-bezier(.2,.9,.2,1);
  box-shadow: 0 1px 4px rgba(0,0,0,0.4);
}

/* Texto XP a la derecha de la barra */
.progress-info {
  font-size: 0.78rem;
  color: #cbd5e1;
  white-space: nowrap;
}

/* Móvil: reducir anchos */
@media (max-width: 640px) {
  .progress-module { min-width: 200px; gap: 8px; }
  .progress-track { width: 140px; height: 12px; }
  .progress-info { display: none; } /* hide XP label on very small screens */
}
</style>


<script>
// Script para leer la información del progress.json

fetch('progress.json')
  .then(response => response.json())
  .then(data => {
    const currentUser = localStorage.getItem('username');
    const userData = data.find(user => user.username === currentUser);
    if (userData) {
      // Actualiza la barra de progreso con los datos del usuario
      updateProgress(userData);
    }
  });
</script>

<script>
// Script para actualizar la barra de información del progress.json

function updateProgress(userData) {
  const progressFill = document.getElementById('progressFill');
  const progressTrack = document.getElementById('progressTrack');
  const xpLabel = document.getElementById('xpLabel');
  const levelLabel = document.getElementById('levelLabel');

  const totalXP = 1000; // El total de experiencia que se necesita para llegar al nivel máximo
  const currentXP = userData.currentXP; // La experiencia actual del usuario
  const level = userData.level; // El nivel actual del usuario

  const pct = Math.round((currentXP / totalXP) * 100);
  progressFill.style.width = pct + '%';
  progressTrack.setAttribute('aria-valuenow', pct);

  xpLabel.textContent = `${currentXP} / ${totalXP} XP`;
  levelLabel.textContent = `NIVEL ${level}`;
}
</script>


<script>
/*
  Uso:
    - Inicializa con initProgress({currentXP, totalXP, level, username})
    - Para sumar XP: addXP(amount)
    - Persiste por usuario en localStorage bajo clave 'progress_{username}'
*/

// Helper: capitalizar (opcional)
function capitalize(s){ return s ? s.charAt(0).toUpperCase()+s.slice(1) : ''; }

// Leer username guardado (si lo guardas en login)
const currentUser = localStorage.getItem('username') || 'guest';

// IDs de elementos
const progressFill = document.getElementById('progressFill');
const progressTrack = document.getElementById('progressTrack');
const xpLabel = document.getElementById('xpLabel');
const levelLabel = document.getElementById('levelLabel');

const storageKey = `progress_${currentUser}`;

// carga inicial desde localStorage si existe, sino valores default (ajusta)
const defaultState = { level: 3, currentXP: 1300, totalXP: 3699 };
let state = loadState() || defaultState;
renderProgress();

/* --- Funciones públicas --- */
function initProgress({ currentXP=0, totalXP=100, level=1 } = {}) {
  state = { level, currentXP, totalXP };
  saveState();
  renderProgress();
}

// Sumar XP (ej: cuando completa una actividad)
function addXP(amount) {
  state.currentXP += amount;
  // si pasa el total, subir nivel y recalcular (ejemplo simple)
  while (state.currentXP >= state.totalXP) {
    state.currentXP -= state.totalXP;
    state.level += 1;
    // ejemplo: totalXP aumenta un 20% cada nivel (ajusta fórmula a tu sistema)
    state.totalXP = Math.round(state.totalXP * 1.2);
  }
  saveState();
  renderProgress();
}

/* --- Internas --- */
function renderProgress() {
  const pct = Math.round((state.currentXP / state.totalXP) * 100);
  const bounded = Math.max(0, Math.min(100, pct));
  progressFill.style.width = bounded + '%';
  progressTrack.setAttribute('aria-valuenow', bounded);

  xpLabel.textContent = `${state.currentXP} / ${state.totalXP} XP`;
  levelLabel.textContent = `NIVEL ${state.level}`;

  // tooltip accesible (title)
  progressTrack.parentElement.title = 'Experiencia obtenida';
}

// Persistir en localStorage
function saveState() {
  try {
    localStorage.setItem(storageKey, JSON.stringify(state));
  } catch(e) {
    console.warn('No se pudo guardar progreso en localStorage:', e);
  }
}
function loadState() {
  try {
    const raw = localStorage.getItem(storageKey);
    return raw ? JSON.parse(raw) : null;
  } catch(e) {
    return null;
  }
}

/* --- Opcional: exponer en window para pruebas desde consola --- */
window.progressModule = {
  initProgress,
  addXP,
  getState: () => JSON.parse(JSON.stringify(state)),
};

// Ejemplo: cuando el usuario está en la página y completa una actividad,
// puedes llamar desde tu lógica: progressModule.addXP(120);
</script>

    



<main class="welcome-container">
    <h1>Te damos la bienvenida,<br> <span id="username">Usuario</span></h1>
    <p>
        Domina conceptos clave de AIESEC a tu propio ritmo y según tu disponibilidad. Mira tu progreso de avance y obtén
        certificados al finalizar todos los módulos de aprendizaje que han sido preparados para ti!
    </p>

    <div class="buttons">
        <button onclick="location.href='quiz.html'">Mis cursos pendientes</button>
        <button>Explorar todos los cursos</button>
    </div>
</main>

<footer>
    Hub Educacional — Argentina 2025
</footer>

<script>
    // Mostrar el nombre del usuario si fue guardado en login
    const user = localStorage.getItem('username');
    if (user) {
        document.getElementById('username').textContent = user.toUpperCase();
    }
</script>


<script>
  (function() {
    console.log('home.html: verificación de sesión iniciada.');
    const username = localStorage.getItem('username');
    console.log('Valor de localStorage.username =', username);

    // Si no existe, redirigimos (o mostramos mensaje). Aquí redirigimos al login.
    if (!username) {
      console.warn('No hay usuario en localStorage. Redirigiendo a index.html');
      // Si prefieres mostrar mensaje en vez de redirigir, comenta la siguiente línea.
      location.href = 'index.html';
      return;
    }

    // Mostrar el usuario con capitalizar la primera letra:
    function capitalize(name) {
      if (!name) return '';
      return name.charAt(0).toUpperCase() + name.slice(1);
    }

    const displayName = capitalize(username);
    const el = document.getElementById('username');
    if (el) {
      el.textContent = displayName;
      console.log('Nombre mostrado en pantalla:', displayName);
    } else {
      console.error('home.html: no se encontró elemento #username en el DOM.');
    }

    // Logout: si el enlace tiene id 'logout', activamos el comportamiento
    const logoutEl = document.getElementById('logout');
    if (logoutEl) {
      logoutEl.addEventListener('click', (e) => {
        e.preventDefault();
        localStorage.removeItem('username');
        console.log('Usuario deslogueado, redirigiendo a index.html');
        location.href = 'index.html';
      });
    }
  })();
</script>






</body>
</html>
